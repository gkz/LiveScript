<!DOCTYPE html>

<html>
<head>
  <title>grammar.ls</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="ast.html">
                  ast.ls
                </a>
              
                
                <a class="source" href="browser.html">
                  browser.ls
                </a>
              
                
                <a class="source" href="command.html">
                  command.ls
                </a>
              
                
                <a class="source" href="grammar.html">
                  grammar.ls
                </a>
              
                
                <a class="source" href="index.html">
                  index.ls
                </a>
              
                
                <a class="source" href="lang-ls.html">
                  lang-ls.ls
                </a>
              
                
                <a class="source" href="lexer.html">
                  lexer.ls
                </a>
              
                
                <a class="source" href="mode-ls.html">
                  mode-ls.ls
                </a>
              
                
                <a class="source" href="node.html">
                  node.ls
                </a>
              
                
                <a class="source" href="options.html">
                  options.ls
                </a>
              
                
                <a class="source" href="util.html">
                  util.ls
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>grammar.ls</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <p>The LiveScript parser is generated by <a href="http://github.com/zaach/jison">Jison</a>
from this grammar file. Jison is a bottom-up parser generator, similar in
style to <a href="http://www.gnu.org/software/bison">Bison</a>,
implemented in JavaScript.
It can recognize
<a href="http://en.wikipedia.org/wiki/LR_grammar">LALR(1), LR(0), SLR(1), and LR(1)</a>
type grammars. To create the Jison parser, we list the pattern to match
on the left-hand side, and the action to take (usually the creation of syntax
tree nodes) on the right. As the parser runs, it
shifts tokens from our token stream, from left to right, and
<a href="http://en.wikipedia.org/wiki/Bottom-up_parsing">attempts to match</a>
the token sequence against the rules below. When a match can be made, it
reduces into the
<a href="http://en.wikipedia.org/wiki/Terminal_and_nonterminal_symbols">nonterminal</a>
(the enclosing name at the top), and we proceed from there.</p>
<p>If you run the <code>scripts/build-parser</code> command, Jison constructs a parse table
from our rules and saves it into <a href="../lib/parser.js">lib/parser.js</a>.</p>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h2 id="jison-dsl">Jison DSL</h2>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Our handy DSL for Jison grammar generation, thanks to
<a href="http://github.com/creationix">Tim Caswell</a>. For every rule in the grammar,
we pass the pattern-defining string, the action to run, and extra options,
optionally. If no action is specified, we simply pass the value of the
previous nonterminal.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>ditto = {}
last  = <span class="hljs-string">''</span><span class="hljs-function">

<span class="hljs-title">o</span> = <span class="hljs-params">(patterns, action, options)</span> -&gt;</span>
    patterns.=trim!.split <span class="hljs-regexp">/\s+/</span>
    action &amp;&amp;= <span class="hljs-keyword">if</span> action <span class="hljs-keyword">is</span> ditto <span class="hljs-keyword">then</span> last <span class="hljs-keyword">else</span>
        <span class="hljs-string">"#action"</span>
        .replace <span class="hljs-regexp">/^function\s*\(\)\s*\{\s*return\s*([\s\S]*);\s*\}/</span> (, a) -&gt;
            <span class="hljs-string">"$$ = <span class="hljs-subst">#{ (<span class="hljs-keyword">if</span> <span class="hljs-string">'L('</span> <span class="hljs-keyword">is</span> a.slice <span class="hljs-number">0</span>, <span class="hljs-number">2</span> <span class="hljs-keyword">then</span> <span class="hljs-string">'('</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"L(@1, @<span class="hljs-subst">#{patterns.length}</span>,"</span>) }</span>#a);"</span>
        .replace <span class="hljs-regexp">/\b(?!Er)(?!String)[A-Z][\w.]*/g</span> <span class="hljs-string">'yy.$&amp;'</span>
        .replace <span class="hljs-regexp">/(\.L\()\s*(\d+\s*\,)\s*(\d+\s*\,)?/g</span> (, a, b, c) -&gt;
            <span class="hljs-string">"#a@<span class="hljs-subst">#{ b || <span class="hljs-string">'1,'</span> }</span>@<span class="hljs-subst">#{ c || b || <span class="hljs-string">"<span class="hljs-subst">#{patterns.length}</span>,"</span> }</span>"</span>
    [patterns, last := action <span class="hljs-keyword">or</span> <span class="hljs-string">''</span>, options]</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <h2 id="grammatical-rules">Grammatical Rules</h2>

            </div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>In all of the rules that follow, you’ll see the name of the nonterminal as
the key to a list of alternative matches. With each match’s action, the
dollar-sign variables are provided by Jison as references to the value of
their numeric position, so in this rule:</p>
<pre><code>Expression MATH Expression
</code></pre><p><code>$1</code> would be the value of the first <em>Expression</em>, <code>$2</code> would be the token
value for the <em>MATH</em> terminal, and <code>$3</code> would be the value of the second
<em>Expression</em>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>bnf =</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>The types of things that can be accessed or called into.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Chain:
        o <span class="hljs-string">'ID'</span>            -&gt; Chain L <span class="hljs-number">1</span> Var $<span class="hljs-number">1</span>
        o <span class="hljs-string">'Parenthetical'</span> -&gt; Chain $<span class="hljs-number">1</span>
        o <span class="hljs-string">'List'</span>          ditto
        o <span class="hljs-string">'STRNUM'</span>        -&gt; Chain L <span class="hljs-number">1</span> Literal $<span class="hljs-number">1</span>
        o <span class="hljs-string">'LITERAL'</span>       ditto

        o <span class="hljs-string">'Chain DOT Key'</span>  -&gt; $<span class="hljs-number">1.</span>add L <span class="hljs-number">2</span> <span class="hljs-number">3</span> Index $<span class="hljs-number">3</span>, $<span class="hljs-number">2</span>, <span class="hljs-literal">true</span>
        o <span class="hljs-string">'Chain DOT List'</span> ditto

        o <span class="hljs-string">'Chain CALL( ArgList OptComma )CALL'</span> -&gt; $<span class="hljs-number">1.</span>add L <span class="hljs-number">2</span> <span class="hljs-number">5</span> Call $<span class="hljs-number">3</span>

        o <span class="hljs-string">'Chain ?'</span> -&gt; Chain L <span class="hljs-number">1</span> <span class="hljs-number">2</span> Existence $<span class="hljs-number">1.</span>unwrap!

        o <span class="hljs-string">'LET CALL( ArgList OptComma )CALL Block'</span> -&gt; Chain L <span class="hljs-number">1</span> <span class="hljs-number">5</span> Call.let $<span class="hljs-number">3</span>, $<span class="hljs-number">6</span>

        o <span class="hljs-string">'[ Expression LoopHeads ]'</span>
        , <span class="hljs-function">-&gt;</span> Chain L <span class="hljs-number">1</span> <span class="hljs-number">4</span> ($<span class="hljs-number">3.0</span>.make-comprehension $<span class="hljs-number">2</span>, $<span class="hljs-number">3.</span>slice <span class="hljs-number">1</span>)
        o <span class="hljs-string">'[ Expression LoopHeads DEDENT ]'</span>
        , <span class="hljs-function">-&gt;</span> Chain L <span class="hljs-number">1</span> <span class="hljs-number">5</span> ($<span class="hljs-number">3.0</span>.make-comprehension $<span class="hljs-number">2</span>, $<span class="hljs-number">3.</span>slice <span class="hljs-number">1</span>)
        o <span class="hljs-string">'{ [ ArgList OptComma ] LoopHeads }'</span>
        , <span class="hljs-function">-&gt;</span> Chain L <span class="hljs-number">1</span> <span class="hljs-number">7</span> ($<span class="hljs-number">6.0</span>.add-obj-comp!.make-comprehension (L <span class="hljs-number">3</span> Arr $<span class="hljs-number">3</span>), $<span class="hljs-number">6.</span>slice <span class="hljs-number">1</span>)

        o <span class="hljs-string">'( BIOP )'</span>            -&gt; Chain L <span class="hljs-number">2</span> Binary $<span class="hljs-number">2</span>
        o <span class="hljs-string">'( BIOP Expression )'</span> -&gt; Chain L <span class="hljs-number">2</span> Binary $<span class="hljs-number">2</span>, , $<span class="hljs-number">3</span>
        o <span class="hljs-string">'( Expression BIOP )'</span> -&gt; Chain L <span class="hljs-number">3</span> Binary $<span class="hljs-number">3</span>,   $<span class="hljs-number">2</span>

        o <span class="hljs-string">'( BIOPR )'</span>
        , <span class="hljs-function">-&gt;</span> Chain L <span class="hljs-number">2</span> <span class="hljs-keyword">if</span> <span class="hljs-string">'!'</span> <span class="hljs-keyword">is</span> $<span class="hljs-number">2.</span>char-at <span class="hljs-number">0</span>
                       <span class="hljs-keyword">then</span> Binary $<span class="hljs-number">2.</span>slice(<span class="hljs-number">1</span>) .invert-it!
                       <span class="hljs-keyword">else</span> Binary $<span class="hljs-number">2</span>
        o <span class="hljs-string">'( BIOPR Expression )'</span>
        , <span class="hljs-function">-&gt;</span> Chain L <span class="hljs-number">2</span> <span class="hljs-keyword">if</span> <span class="hljs-string">'!'</span> <span class="hljs-keyword">is</span> $<span class="hljs-number">2.</span>char-at <span class="hljs-number">0</span>
                       <span class="hljs-keyword">then</span> Binary $<span class="hljs-number">2.</span>slice(<span class="hljs-number">1</span>), , $<span class="hljs-number">3</span> .invert-it!
                       <span class="hljs-keyword">else</span> Binary $<span class="hljs-number">2</span>, , $<span class="hljs-number">3</span>
        o <span class="hljs-string">'( Expression BIOPR )'</span>
        , <span class="hljs-function">-&gt;</span> Chain L <span class="hljs-number">3</span> <span class="hljs-keyword">if</span> <span class="hljs-string">'!'</span> <span class="hljs-keyword">is</span> $<span class="hljs-number">3.</span>char-at <span class="hljs-number">0</span>
                       <span class="hljs-keyword">then</span> Binary $<span class="hljs-number">3.</span>slice(<span class="hljs-number">1</span>), $<span class="hljs-number">2</span> .invert-it!
                       <span class="hljs-keyword">else</span> Binary $<span class="hljs-number">3</span>, $<span class="hljs-number">2</span>

        o <span class="hljs-string">'( BIOPBP )'</span>                              -&gt; Chain L <span class="hljs-number">2</span> Binary $<span class="hljs-number">2</span>
        o <span class="hljs-string">'( BIOPBP CALL( ArgList OptComma )CALL )'</span> -&gt; Chain L <span class="hljs-number">2</span> Binary $<span class="hljs-number">2</span>, , $<span class="hljs-number">4</span>

        o <span class="hljs-string">'( BIOPP )'</span>                                -&gt; Chain L <span class="hljs-number">2</span> Binary $<span class="hljs-number">2</span>
        o <span class="hljs-string">'( PARAM( ArgList OptComma )PARAM BIOPP )'</span> -&gt; Chain L <span class="hljs-number">6</span> Binary $<span class="hljs-number">6</span>, $<span class="hljs-number">3</span>

        o <span class="hljs-string">'( UNARY )'</span>           -&gt; Chain L <span class="hljs-number">2</span> Unary $<span class="hljs-number">2</span>
        o <span class="hljs-string">'( CREMENT )'</span>         ditto

        o <span class="hljs-string">'( BACKTICK Chain BACKTICK )'</span>            -&gt; Chain $<span class="hljs-number">3</span>
        o <span class="hljs-string">'( Expression BACKTICK Chain BACKTICK )'</span> -&gt; Chain L <span class="hljs-number">2</span> <span class="hljs-number">5</span> $<span class="hljs-number">4.</span>add L <span class="hljs-number">2</span> Call [$<span class="hljs-number">2</span>]
        o <span class="hljs-string">'( BACKTICK Chain BACKTICK Expression )'</span>
        , <span class="hljs-function">-&gt;</span> Chain(L <span class="hljs-number">3</span> Chain Var <span class="hljs-string">'flip$'</span> .add L <span class="hljs-number">3</span> Call [$<span class="hljs-number">3</span>]).flip-it!.add L <span class="hljs-number">5</span> Call [$<span class="hljs-number">5</span>]

        o <span class="hljs-string">'[ Expression TO Expression ]'</span>
        , <span class="hljs-function">-&gt;</span> Chain L <span class="hljs-number">2</span> <span class="hljs-number">4</span> <span class="hljs-keyword">new</span> For from: $<span class="hljs-number">2</span>, op: $<span class="hljs-number">3</span>, to: $<span class="hljs-number">4</span>, <span class="hljs-keyword">in</span>-comprehension: <span class="hljs-literal">true</span>
        o <span class="hljs-string">'[ Expression TO Expression BY Expression ]'</span>
        , <span class="hljs-function">-&gt;</span> Chain L <span class="hljs-number">2</span> <span class="hljs-number">6</span> <span class="hljs-keyword">new</span> For from: $<span class="hljs-number">2</span>, op: $<span class="hljs-number">3</span>, to: $<span class="hljs-number">4</span>, step: $<span class="hljs-number">6</span>, <span class="hljs-keyword">in</span>-comprehension: <span class="hljs-literal">true</span>
        o <span class="hljs-string">'[ FROM Expression TO Expression ]'</span>
        , <span class="hljs-function">-&gt;</span> Chain L <span class="hljs-number">2</span> <span class="hljs-number">5</span> <span class="hljs-keyword">new</span> For from: $<span class="hljs-number">3</span>, op: $<span class="hljs-number">4</span>, to: $<span class="hljs-number">5</span>, <span class="hljs-keyword">in</span>-comprehension: <span class="hljs-literal">true</span>
        o <span class="hljs-string">'[ FROM Expression TO Expression BY Expression ]'</span>
        , <span class="hljs-function">-&gt;</span> Chain L <span class="hljs-number">2</span> <span class="hljs-number">7</span> <span class="hljs-keyword">new</span> For from: $<span class="hljs-number">3</span>, op: $<span class="hljs-number">4</span>, to: $<span class="hljs-number">5</span>, step: $<span class="hljs-number">7</span>, <span class="hljs-keyword">in</span>-comprehension: <span class="hljs-literal">true</span>
        o <span class="hljs-string">'[ TO Expression ]'</span>
        , <span class="hljs-function">-&gt;</span> Chain L <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-keyword">new</span> For from: (Chain Literal <span class="hljs-number">0</span>), op: $<span class="hljs-number">2</span>, to: $<span class="hljs-number">3</span>, <span class="hljs-keyword">in</span>-comprehension: <span class="hljs-literal">true</span>
        o <span class="hljs-string">'[ TO Expression BY Expression ]'</span>
        , <span class="hljs-function">-&gt;</span> Chain L <span class="hljs-number">2</span> <span class="hljs-number">5</span> <span class="hljs-keyword">new</span> For from: (Chain Literal <span class="hljs-number">0</span>), op: $<span class="hljs-number">2</span>, to: $<span class="hljs-number">3</span>, step: $<span class="hljs-number">5</span>, <span class="hljs-keyword">in</span>-comprehension: <span class="hljs-literal">true</span>

        o <span class="hljs-string">'Chain DOT [ Expression TO Expression BY Expression ]'</span>
        , <span class="hljs-function">-&gt;</span> Chain L <span class="hljs-number">1</span> <span class="hljs-number">9</span> <span class="hljs-keyword">new</span> StepSlice op: $<span class="hljs-number">5</span>, target: $<span class="hljs-number">1</span>, from: $<span class="hljs-number">4</span>, to: $<span class="hljs-number">6</span>, step: $<span class="hljs-number">8</span>
        o <span class="hljs-string">'Chain DOT [ TO Expression BY Expression ]'</span>
        , <span class="hljs-function">-&gt;</span> Chain L <span class="hljs-number">1</span> <span class="hljs-number">8</span> <span class="hljs-keyword">new</span> StepSlice op: $<span class="hljs-number">4</span>, target: $<span class="hljs-number">1</span>, from: (Literal <span class="hljs-number">0</span>), to: $<span class="hljs-number">5</span>, step: $<span class="hljs-number">7</span>
        o <span class="hljs-string">'Chain DOT [ Expression TO Expression ]'</span>
        , <span class="hljs-function">-&gt;</span> Chain L <span class="hljs-number">1</span> <span class="hljs-number">7</span> Slice type: $<span class="hljs-number">5</span>, target: $<span class="hljs-number">1</span>, from: $<span class="hljs-number">4</span>, to: $<span class="hljs-number">6</span>
        o <span class="hljs-string">'Chain DOT [ Expression TO ]'</span>
        , <span class="hljs-function">-&gt;</span> Chain L <span class="hljs-number">1</span> <span class="hljs-number">6</span> Slice type: $<span class="hljs-number">5</span>, target: $<span class="hljs-number">1</span>, from: $<span class="hljs-number">4</span>
        o <span class="hljs-string">'Chain DOT [ TO Expression ]'</span>
        , <span class="hljs-function">-&gt;</span> Chain L <span class="hljs-number">1</span> <span class="hljs-number">6</span> Slice type: $<span class="hljs-number">4</span>, target: $<span class="hljs-number">1</span>, to: $<span class="hljs-number">5</span>
        o <span class="hljs-string">'Chain DOT [ TO ]'</span>
        , <span class="hljs-function">-&gt;</span> Chain L <span class="hljs-number">1</span> <span class="hljs-number">5</span> Slice type: $<span class="hljs-number">4</span>, target: $<span class="hljs-number">1</span>

        o <span class="hljs-string">'WITH Expression Block'</span>
        , <span class="hljs-function">-&gt;</span> Chain L <span class="hljs-number">1</span> <span class="hljs-number">2</span> Cascade $<span class="hljs-number">2</span>, $<span class="hljs-number">3</span>, <span class="hljs-string">'with'</span>
        o <span class="hljs-string">'FOR  Expression Block'</span>
        , <span class="hljs-function">-&gt;</span> Chain L <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-keyword">new</span> For(kind: $<span class="hljs-number">1</span>, source: $<span class="hljs-number">2</span>, body: $<span class="hljs-number">3</span>, ref: <span class="hljs-literal">true</span>).add-body $<span class="hljs-number">3</span></pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>An array or object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    List:
        o <span class="hljs-string">'[ ArgList    OptComma ]'</span> -&gt; Arr $<span class="hljs-number">2</span>
        o <span class="hljs-string">'{ Properties OptComma }'</span> -&gt; Obj $<span class="hljs-number">2</span></pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>can be labeled to perform named destructuring.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        o <span class="hljs-string">'[ ArgList    OptComma ] LABEL'</span> -&gt; Arr $<span class="hljs-number">2</span> .named $<span class="hljs-number">5</span>
        o <span class="hljs-string">'{ Properties OptComma } LABEL'</span> -&gt; Obj $<span class="hljs-number">2</span> .named $<span class="hljs-number">5</span></pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p><strong>Key</strong> represents a property name, before <code>:</code> or after <code>.</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Key:
        o <span class="hljs-string">'KeyBase'</span>
        o <span class="hljs-string">'Parenthetical'</span>
    KeyBase:
        o <span class="hljs-string">'ID'</span>     -&gt; Key     $<span class="hljs-number">1</span>
        o <span class="hljs-string">'STRNUM'</span> -&gt; Literal $<span class="hljs-number">1</span></pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p><strong>ArgList</strong> is either the list of objects passed into a function call,
the parameter list of a function, or the contents of an array literal
(i.e. comma-separated expressions). Newlines work as well.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    ArgList:
        o <span class="hljs-string">''</span>                                                -&gt; []
        o <span class="hljs-string">'Arg'</span>                                             -&gt; [$<span class="hljs-number">1</span>]
        o <span class="hljs-string">'ArgList , Arg'</span>                                   -&gt; $<span class="hljs-number">1</span> ++ $<span class="hljs-number">3</span>
        o <span class="hljs-string">'ArgList OptComma NEWLINE Arg'</span>                    -&gt; $<span class="hljs-number">1</span> ++ $<span class="hljs-number">4</span>
        o <span class="hljs-string">'ArgList OptComma INDENT ArgList OptComma DEDENT'</span> ditto
    Arg:
        o     <span class="hljs-string">'Expression'</span>
        o <span class="hljs-string">'... Expression'</span> -&gt; Splat $<span class="hljs-number">2</span>
        o <span class="hljs-string">'...'</span>            -&gt; Splat (L <span class="hljs-number">1</span>, Arr!), <span class="hljs-literal">true</span></pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>An optional, trailing comma.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    OptComma:
        o <span class="hljs-string">''</span>
        o <span class="hljs-string">','</span></pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>A list of lines, separated by newlines or semicolons.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Lines:
        o <span class="hljs-string">''</span>                   -&gt; Block!
        o <span class="hljs-string">'Line'</span>               -&gt; Block $<span class="hljs-number">1</span>
        o <span class="hljs-string">'Lines NEWLINE Line'</span> -&gt; $<span class="hljs-number">1.</span>add $<span class="hljs-number">3</span>
        o <span class="hljs-string">'Lines NEWLINE'</span>

    Line:
        o <span class="hljs-string">'Expression'</span></pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Cascade without <code>with</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        o <span class="hljs-string">'Expression Block'</span> -&gt; Cascade $<span class="hljs-number">1</span>, $<span class="hljs-number">2</span>, <span class="hljs-string">'cascade'</span>

        o <span class="hljs-string">'PARAM( ArgList OptComma )PARAM &lt;- Expression'</span>
        , <span class="hljs-function">-&gt;</span> Call.back $<span class="hljs-number">2</span>, $<span class="hljs-number">6</span>, <span class="hljs-regexp">/~/</span>.test($<span class="hljs-number">5</span>), <span class="hljs-regexp">/--|~~/</span>.test($<span class="hljs-number">5</span>), <span class="hljs-regexp">/!/</span>.test($<span class="hljs-number">5</span>), <span class="hljs-regexp">/\*/</span>.test($<span class="hljs-number">5</span>)

        o <span class="hljs-string">'COMMENT'</span> -&gt; JS $<span class="hljs-number">1</span>, <span class="hljs-literal">true</span> <span class="hljs-literal">true</span></pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p><a href="http://search.cpan.org/~tmtm/Yada-Yada-Yada-1.00/Yada.pm">yadayadayada</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        o <span class="hljs-string">'...'</span> -&gt; Throw L <span class="hljs-number">1</span> JS <span class="hljs-string">"Error('unimplemented')"</span>

        o <span class="hljs-string">'REQUIRE Chain'</span>   -&gt; Require $<span class="hljs-number">2.</span>unwrap!</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>An indented block of expressions.
Note that <a href="#lexer">Lexer</a> rewrites some single-line forms into blocks.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Block:
        o <span class="hljs-string">'INDENT Lines DEDENT'</span> -&gt; $<span class="hljs-number">2</span>
        ...

    SplatChain:
        o <span class="hljs-string">'... Chain'</span> -&gt; Splat $<span class="hljs-number">2.</span>unwrap!
        ...</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>All the different types of expressions in our language.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Expression:
        o <span class="hljs-string">'Chain CLONEPORT Expression'</span>
        , <span class="hljs-function">-&gt;</span> Import (L <span class="hljs-number">1</span> <span class="hljs-number">2</span> Unary <span class="hljs-string">'^^'</span> $<span class="hljs-number">1</span>, prec: <span class="hljs-string">'UNARY'</span>), $<span class="hljs-number">3</span>,         <span class="hljs-literal">false</span>
        o <span class="hljs-string">'Chain CLONEPORT Block'</span>
        , <span class="hljs-function">-&gt;</span> Import (L <span class="hljs-number">1</span> <span class="hljs-number">2</span> Unary <span class="hljs-string">'^^'</span> $<span class="hljs-number">1</span>, prec: <span class="hljs-string">'UNARY'</span>), $<span class="hljs-number">3.</span>unwrap!, <span class="hljs-literal">false</span>

        o <span class="hljs-string">'Expression BACKTICK Chain BACKTICK Expression'</span> -&gt; $<span class="hljs-number">3.</span>add L <span class="hljs-number">1</span> <span class="hljs-number">5</span> Call [$<span class="hljs-number">1</span>, $<span class="hljs-number">5</span>]

        o <span class="hljs-string">'Chain'</span> -&gt; $<span class="hljs-number">1.</span>unwrap!

        o <span class="hljs-string">'Chain ASSIGN Expression'</span>
        , <span class="hljs-function">-&gt;</span> Assign $<span class="hljs-number">1.</span>unwrap!, $<span class="hljs-number">3</span>           , L <span class="hljs-number">2</span> Box $<span class="hljs-number">2</span>
        o <span class="hljs-string">'SplatChain ASSIGN Expression'</span>
        , <span class="hljs-function">-&gt;</span> Assign $<span class="hljs-number">1</span>, $<span class="hljs-number">3</span>                   , L <span class="hljs-number">2</span> Box $<span class="hljs-number">2</span>
        o <span class="hljs-string">'Chain ASSIGN INDENT ArgList OptComma DEDENT'</span>
        , <span class="hljs-function">-&gt;</span> Assign $<span class="hljs-number">1.</span>unwrap!, Arr.maybe($<span class="hljs-number">4</span>), L <span class="hljs-number">2</span> Box $<span class="hljs-number">2</span>

        o <span class="hljs-string">'Expression IMPORT Expression'</span>
        , <span class="hljs-function">-&gt;</span> Import $<span class="hljs-number">1</span>, $<span class="hljs-number">3</span>           , $<span class="hljs-number">2</span> <span class="hljs-keyword">is</span> <span class="hljs-string">'&lt;&lt;&lt;&lt;'</span>
        o <span class="hljs-string">'Expression IMPORT INDENT ArgList OptComma DEDENT'</span>
        , <span class="hljs-function">-&gt;</span> Import $<span class="hljs-number">1</span>, Arr.maybe($<span class="hljs-number">4</span>), $<span class="hljs-number">2</span> <span class="hljs-keyword">is</span> <span class="hljs-string">'&lt;&lt;&lt;&lt;'</span>

        o <span class="hljs-string">'CREMENT Chain'</span> -&gt; Unary $<span class="hljs-number">1</span>, $<span class="hljs-number">2.</span>unwrap!
        o <span class="hljs-string">'Chain CREMENT'</span> -&gt; Unary $<span class="hljs-number">2</span>, $<span class="hljs-number">1.</span>unwrap!, <span class="hljs-literal">true</span>
        o <span class="hljs-string">'CREMENT ... Chain'</span> -&gt; Unary $<span class="hljs-number">1</span>, Splat $<span class="hljs-number">3.</span>unwrap!
        o <span class="hljs-string">'SplatChain CREMENT'</span> -&gt; Unary $<span class="hljs-number">2</span>, $<span class="hljs-number">1</span>, <span class="hljs-literal">true</span>

        o <span class="hljs-string">'UNARY ASSIGN     Chain'</span> -&gt; Assign $<span class="hljs-number">3.</span>unwrap!, [$<span class="hljs-number">1</span>] L <span class="hljs-number">2</span> Box $<span class="hljs-number">2</span>
        o <span class="hljs-string">'+-    ASSIGN     Chain'</span> ditto
        o <span class="hljs-string">'CLONE ASSIGN     Chain'</span> ditto
        o <span class="hljs-string">'UNARY ASSIGN ... Chain'</span> -&gt; Assign Splat($<span class="hljs-number">4.</span>unwrap!), [$<span class="hljs-number">1</span>] L <span class="hljs-number">2</span> Box $<span class="hljs-number">2</span>
        o <span class="hljs-string">'+-    ASSIGN ... Chain'</span> ditto
        o <span class="hljs-string">'CLONE ASSIGN ... Chain'</span> ditto

        o <span class="hljs-string">'UNARY     Expression'</span> -&gt; Unary $<span class="hljs-number">1</span>, $<span class="hljs-number">2</span>
        o <span class="hljs-string">'+-        Expression'</span> ditto, prec: <span class="hljs-string">'UNARY'</span>
        o <span class="hljs-string">'CLONE     Expression'</span> ditto, prec: <span class="hljs-string">'UNARY'</span>
        o <span class="hljs-string">'UNARY ... Expression'</span> -&gt; Unary $<span class="hljs-number">1</span>, Splat $<span class="hljs-number">3</span>
        o <span class="hljs-string">'+-    ... Expression'</span> ditto, prec: <span class="hljs-string">'UNARY'</span>
        o <span class="hljs-string">'CLONE ... Expression'</span> ditto, prec: <span class="hljs-string">'UNARY'</span>
        o <span class="hljs-string">'UNARY ... INDENT ArgList OptComma DEDENT'</span> -&gt; Unary $<span class="hljs-number">1</span>, Splat Arr $<span class="hljs-number">4</span>

        o <span class="hljs-string">'UNARY INDENT ArgList OptComma DEDENT'</span> -&gt; Unary $<span class="hljs-number">1</span>, Arr.maybe $<span class="hljs-number">3</span>

        o <span class="hljs-string">'YIELD'</span> -&gt; Yield $<span class="hljs-number">1</span>
        o <span class="hljs-string">'YIELD Expression'</span> -&gt; Yield $<span class="hljs-number">1</span>, $<span class="hljs-number">2</span>

        o <span class="hljs-string">'Expression +-      Expression'</span> -&gt; L <span class="hljs-number">2</span> Binary $<span class="hljs-number">2</span>, $<span class="hljs-number">1</span>, $<span class="hljs-number">3</span>
        o <span class="hljs-string">'Expression COMPARE Expression'</span> ditto
        o <span class="hljs-string">'Expression LOGIC   Expression'</span> ditto
        o <span class="hljs-string">'Expression MATH    Expression'</span> ditto
        o <span class="hljs-string">'Expression POWER   Expression'</span> ditto
        o <span class="hljs-string">'Expression SHIFT   Expression'</span> ditto
        o <span class="hljs-string">'Expression BITWISE Expression'</span> ditto
        o <span class="hljs-string">'Expression CONCAT  Expression'</span> ditto
        o <span class="hljs-string">'Expression COMPOSE Expression'</span> ditto</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>the <code>*if</code> is required for the proper compilation for use with the dsl</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        o <span class="hljs-string">'Expression RELATION Expression'</span> -&gt;
          *<span class="hljs-keyword">if</span> <span class="hljs-string">'!'</span> <span class="hljs-keyword">is</span> $<span class="hljs-number">2.</span>char-at <span class="hljs-number">0</span> <span class="hljs-keyword">then</span> Binary $<span class="hljs-number">2.</span>slice(<span class="hljs-number">1</span>), $<span class="hljs-number">1</span>, $<span class="hljs-number">3</span> .invert!
                                  <span class="hljs-keyword">else</span> Binary $<span class="hljs-number">2</span>         , $<span class="hljs-number">1</span>, $<span class="hljs-number">3</span>

        o <span class="hljs-string">'Expression PIPE     Expression'</span> -&gt; Block $<span class="hljs-number">1</span> .pipe $<span class="hljs-number">3</span>, $<span class="hljs-number">2</span>
        o <span class="hljs-string">'Expression BACKPIPE Expression'</span> -&gt; Block $<span class="hljs-number">1</span> .pipe [$<span class="hljs-number">3</span>], $<span class="hljs-number">2</span>

        o <span class="hljs-string">'Chain !?'</span> -&gt; Existence $<span class="hljs-number">1.</span>unwrap!, <span class="hljs-literal">true</span></pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>The function literal can be either anonymous with <code>-&gt;</code>,</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        o <span class="hljs-string">'PARAM( ArgList OptComma )PARAM -&gt; Block'</span>
        , <span class="hljs-function">-&gt;</span> Fun $<span class="hljs-number">2</span>, $<span class="hljs-number">6</span>, <span class="hljs-regexp">/~/</span>.test($<span class="hljs-number">5</span>), <span class="hljs-regexp">/--|~~/</span>.test($<span class="hljs-number">5</span>), <span class="hljs-regexp">/!/</span>.test($<span class="hljs-number">5</span>), <span class="hljs-regexp">/\*/</span>.test($<span class="hljs-number">5</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>or named with <code>function</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        o <span class="hljs-string">'FUNCTION CALL( ArgList OptComma )CALL Block'</span> -&gt; (Fun $<span class="hljs-number">3</span>, $<span class="hljs-number">6</span>).named $<span class="hljs-number">1</span>
        o <span class="hljs-string">'GENERATOR CALL( ArgList OptComma )CALL Block'</span>
        , <span class="hljs-function">-&gt;</span> (Fun $<span class="hljs-number">3</span>, $<span class="hljs-number">6</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>).named $<span class="hljs-number">1</span></pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>The full complement of <code>if</code> and <code>unless</code> expressions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        o <span class="hljs-string">'IF Expression Block Else'</span>      -&gt; L <span class="hljs-number">1</span> <span class="hljs-number">2</span> If $<span class="hljs-number">2</span>, $<span class="hljs-number">3</span>, $<span class="hljs-number">1</span> <span class="hljs-keyword">is</span> <span class="hljs-string">'unless'</span> .add-<span class="hljs-keyword">else</span> $<span class="hljs-number">4</span></pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>and their postfix forms.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        o <span class="hljs-string">'Expression POST_IF Expression'</span> -&gt; L <span class="hljs-number">2</span> <span class="hljs-number">3</span> If $<span class="hljs-number">3</span>, $<span class="hljs-number">1</span>, $<span class="hljs-number">2</span> <span class="hljs-keyword">is</span> <span class="hljs-string">'unless'</span></pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Loops can either be normal with a block of expressions to execute
and an optional <code>else</code> clause,</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        o <span class="hljs-string">'LoopHead Block Else'</span> -&gt; $<span class="hljs-number">1.</span>add-body $<span class="hljs-number">2</span> .add-<span class="hljs-keyword">else</span> $<span class="hljs-number">3</span></pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>postfix with a single expression,</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        o <span class="hljs-string">'DO Block WHILE Expression'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> While($<span class="hljs-number">4</span>, $<span class="hljs-number">3</span> <span class="hljs-keyword">is</span> <span class="hljs-string">'until'</span>, <span class="hljs-literal">true</span>).add-body $<span class="hljs-number">2</span></pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>with a guard</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        o <span class="hljs-string">'DO Block WHILE Expression CASE Expression'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> While($<span class="hljs-number">4</span>, $<span class="hljs-number">3</span> <span class="hljs-keyword">is</span> <span class="hljs-string">'until'</span>, <span class="hljs-literal">true</span>).add-guard $<span class="hljs-number">6</span> .add-body $<span class="hljs-number">2</span></pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p><code>return</code> or <code>throw</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        o <span class="hljs-string">'HURL Expression'</span>                     -&gt; Jump[$<span class="hljs-number">1</span>] $<span class="hljs-number">2</span>
        o <span class="hljs-string">'HURL INDENT ArgList OptComma DEDENT'</span> -&gt; Jump[$<span class="hljs-number">1</span>] Arr.maybe $<span class="hljs-number">3</span>
        o <span class="hljs-string">'HURL'</span>                                -&gt; Jump[$<span class="hljs-number">1</span>]!</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p><code>break</code> or <code>continue</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        o <span class="hljs-string">'JUMP'</span>     -&gt; <span class="hljs-keyword">new</span> Jump $<span class="hljs-number">1</span>
        o <span class="hljs-string">'JUMP ID'</span> -&gt; <span class="hljs-keyword">new</span> Jump $<span class="hljs-number">1</span>, $<span class="hljs-number">2</span>

        o <span class="hljs-string">'SWITCH Exprs Cases'</span>               -&gt; <span class="hljs-keyword">new</span> Switch $<span class="hljs-number">1</span>, $<span class="hljs-number">2</span>, $<span class="hljs-number">3</span>
        o <span class="hljs-string">'SWITCH Exprs Cases DEFAULT Block'</span> -&gt; <span class="hljs-keyword">new</span> Switch $<span class="hljs-number">1</span>, $<span class="hljs-number">2</span>, $<span class="hljs-number">3</span>, $<span class="hljs-number">5</span>
        o <span class="hljs-string">'SWITCH Exprs Cases ELSE    Block'</span> -&gt; <span class="hljs-keyword">new</span> Switch $<span class="hljs-number">1</span>, $<span class="hljs-number">2</span>, $<span class="hljs-number">3</span>, $<span class="hljs-number">5</span>
        o <span class="hljs-string">'SWITCH       Cases'</span>               -&gt; <span class="hljs-keyword">new</span> Switch $<span class="hljs-number">1</span>, <span class="hljs-literal">null</span> $<span class="hljs-number">2</span>
        o <span class="hljs-string">'SWITCH       Cases DEFAULT Block'</span> -&gt; <span class="hljs-keyword">new</span> Switch $<span class="hljs-number">1</span>, <span class="hljs-literal">null</span> $<span class="hljs-number">2</span>, $<span class="hljs-number">4</span>
        o <span class="hljs-string">'SWITCH       Cases ELSE    Block'</span> -&gt; <span class="hljs-keyword">new</span> Switch $<span class="hljs-number">1</span>, <span class="hljs-literal">null</span> $<span class="hljs-number">2</span>, $<span class="hljs-number">4</span>
        o <span class="hljs-string">'SWITCH                     Block'</span> -&gt; <span class="hljs-keyword">new</span> Switch $<span class="hljs-number">1</span>, <span class="hljs-literal">null</span> [], $<span class="hljs-number">2</span>

        o <span class="hljs-string">'TRY Block'</span>                               -&gt; <span class="hljs-keyword">new</span> Try $<span class="hljs-number">2</span>
        o <span class="hljs-string">'TRY Block CATCH Block'</span>                   -&gt; <span class="hljs-keyword">new</span> Try $<span class="hljs-number">2</span>, , (L <span class="hljs-number">3</span> $<span class="hljs-number">4</span>)
        o <span class="hljs-string">'TRY Block CATCH Block     FINALLY Block'</span> -&gt; <span class="hljs-keyword">new</span> Try $<span class="hljs-number">2</span>, , (L <span class="hljs-number">3</span> $<span class="hljs-number">4</span>), (L <span class="hljs-number">5</span> $<span class="hljs-number">6</span>)
        o <span class="hljs-string">'TRY Block CATCH Arg Block'</span>               -&gt; <span class="hljs-keyword">new</span> Try $<span class="hljs-number">2</span>, $<span class="hljs-number">4</span>, (L <span class="hljs-number">3</span> <span class="hljs-number">4</span> $<span class="hljs-number">5</span>)
        o <span class="hljs-string">'TRY Block CATCH Arg Block FINALLY Block'</span> -&gt; <span class="hljs-keyword">new</span> Try $<span class="hljs-number">2</span>, $<span class="hljs-number">4</span>, (L <span class="hljs-number">3</span> <span class="hljs-number">4</span> $<span class="hljs-number">5</span>), (L <span class="hljs-number">6</span> $<span class="hljs-number">7</span>)
        o <span class="hljs-string">'TRY Block                 FINALLY Block'</span> -&gt; <span class="hljs-keyword">new</span> Try $<span class="hljs-number">2</span>, , , (L <span class="hljs-number">3</span> $<span class="hljs-number">4</span>)

        o <span class="hljs-string">'CLASS Chain OptExtends OptImplements Block'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> Class title: $<span class="hljs-number">2.</span>unwrap!, sup: $<span class="hljs-number">3</span>, mixins: $<span class="hljs-number">4</span>, body: $<span class="hljs-number">5</span>
        o <span class="hljs-string">'CLASS       OptExtends OptImplements Block'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> Class                    sup: $<span class="hljs-number">2</span>, mixins: $<span class="hljs-number">3</span>, body: $<span class="hljs-number">4</span>

        o <span class="hljs-string">'Chain EXTENDS Expression'</span> -&gt; Util.Extends $<span class="hljs-number">1.</span>unwrap!, $<span class="hljs-number">3</span>

        o <span class="hljs-string">'LABEL Expression'</span> -&gt; <span class="hljs-keyword">new</span> Label $<span class="hljs-number">1</span>, $<span class="hljs-number">2</span>
        o <span class="hljs-string">'LABEL Block'</span>      ditto</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p><code>var</code>, <code>const</code>, <code>export</code>, or <code>import</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        o <span class="hljs-string">'DECL INDENT ArgList OptComma DEDENT'</span> -&gt; Decl $<span class="hljs-number">1</span>, $<span class="hljs-number">3</span>, yylineno+<span class="hljs-number">1</span>

    Exprs:
        o         <span class="hljs-string">'Expression'</span> -&gt; [$<span class="hljs-number">1</span>]
        o <span class="hljs-string">'Exprs , Expression'</span> -&gt; $<span class="hljs-number">1</span> ++ $<span class="hljs-number">3</span></pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>The various forms of property.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    KeyValue:
        o <span class="hljs-string">'Key'</span>
        o <span class="hljs-string">'LITERAL'</span> -&gt; Prop L(<span class="hljs-number">1</span>,Key $<span class="hljs-number">1</span>, $<span class="hljs-number">1</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> &lt;[ arguments eval ]&gt;), L <span class="hljs-number">1</span> Literal $<span class="hljs-number">1</span>
        o <span class="hljs-string">'Key     DOT KeyBase'</span> -&gt; Prop $<span class="hljs-number">3</span>, Chain(            $<span class="hljs-number">1</span>; [L <span class="hljs-number">2</span> <span class="hljs-number">3</span> Index $<span class="hljs-number">3</span>, $<span class="hljs-number">2</span>])
        o <span class="hljs-string">'LITERAL DOT KeyBase'</span> -&gt; Prop $<span class="hljs-number">3</span>, Chain(L <span class="hljs-number">1</span> Literal $<span class="hljs-number">1</span>; [L <span class="hljs-number">2</span> <span class="hljs-number">3</span> Index $<span class="hljs-number">3</span>, $<span class="hljs-number">2</span>])
        o <span class="hljs-string">'{ Properties OptComma } LABEL'</span> -&gt; Prop L(<span class="hljs-number">5</span>, Key $<span class="hljs-number">5</span>), L(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, Obj $<span class="hljs-number">2</span> .named $<span class="hljs-number">5</span>)
        o <span class="hljs-string">'[ ArgList    OptComma ] LABEL'</span> -&gt; Prop L(<span class="hljs-number">5</span>, Key $<span class="hljs-number">5</span>), L(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, Arr $<span class="hljs-number">2</span> .named $<span class="hljs-number">5</span>)
    Property:
        o <span class="hljs-string">'Key : Expression'</span>                     -&gt; Prop $<span class="hljs-number">1</span>, $<span class="hljs-number">3</span>
        o <span class="hljs-string">'Key : INDENT ArgList OptComma DEDENT'</span> -&gt; Prop $<span class="hljs-number">1</span>, Arr.maybe($<span class="hljs-number">4</span>)

        o <span class="hljs-string">'KeyValue'</span>
        o <span class="hljs-string">'KeyValue LOGIC Expression'</span>  -&gt; L <span class="hljs-number">2</span> Binary $<span class="hljs-number">2</span>, $<span class="hljs-number">1</span>, $<span class="hljs-number">3</span>
        o <span class="hljs-string">'KeyValue ASSIGN Expression'</span> -&gt; L <span class="hljs-number">2</span> Binary $<span class="hljs-number">2</span>, $<span class="hljs-number">1</span>, $<span class="hljs-number">3</span>, <span class="hljs-literal">true</span>

        o <span class="hljs-string">'+- Key'</span>     -&gt; Prop $<span class="hljs-number">2.</span>maybe-key!   , L <span class="hljs-number">1</span> Literal $<span class="hljs-number">1</span> <span class="hljs-keyword">is</span> <span class="hljs-string">'+'</span>
        o <span class="hljs-string">'+- LITERAL'</span> -&gt; Prop L(<span class="hljs-number">2</span>, Key $<span class="hljs-number">2</span>, <span class="hljs-literal">true</span>), L <span class="hljs-number">1</span> Literal $<span class="hljs-number">1</span> <span class="hljs-keyword">is</span> <span class="hljs-string">'+'</span>

        o <span class="hljs-string">'... Expression'</span> -&gt; Splat $<span class="hljs-number">2</span>

        o <span class="hljs-string">'COMMENT'</span> -&gt; JS $<span class="hljs-number">1</span>, <span class="hljs-literal">true</span> <span class="hljs-literal">true</span></pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Properties within an object literal can be separated by
commas, as in JavaScript, or simply by newlines.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Properties:
        o <span class="hljs-string">''</span>                                     -&gt; []
        o <span class="hljs-string">'Property'</span>                             -&gt; [$<span class="hljs-number">1</span>]
        o <span class="hljs-string">'Properties , Property'</span>                -&gt; $<span class="hljs-number">1</span> ++ $<span class="hljs-number">3</span>
        o <span class="hljs-string">'Properties OptComma NEWLINE Property'</span> -&gt; $<span class="hljs-number">1</span> ++ $<span class="hljs-number">4</span>
        o <span class="hljs-string">'INDENT Properties OptComma DEDENT'</span>    -&gt; $<span class="hljs-number">2</span>

    Parenthetical:
        o <span class="hljs-string">'( Body )'</span> -&gt; Parens $<span class="hljs-number">2.</span>chomp!.unwrap!, <span class="hljs-literal">false</span>, $<span class="hljs-number">1</span> <span class="hljs-keyword">is</span> <span class="hljs-string">'"'</span>, (L <span class="hljs-number">1</span> {}), (L <span class="hljs-number">3</span> {})
        ...

    Body:
        o <span class="hljs-string">'Lines'</span>
        o <span class="hljs-string">'Block'</span>
        o <span class="hljs-string">'Block NEWLINE Lines'</span> -&gt; $<span class="hljs-number">1.</span>add $<span class="hljs-number">3</span>

    Else:
        o <span class="hljs-string">''</span>                              -&gt; <span class="hljs-literal">null</span>
        o <span class="hljs-string">'ELSE Block'</span>                    -&gt; $<span class="hljs-number">2</span>
        o <span class="hljs-string">'ELSE IF Expression Block Else'</span> -&gt; If $<span class="hljs-number">3</span>, $<span class="hljs-number">4</span>, $<span class="hljs-number">2</span> <span class="hljs-keyword">is</span> <span class="hljs-string">'unless'</span> .add-<span class="hljs-keyword">else</span> $<span class="hljs-number">5</span>

    LoopHead:</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>The source of a <code>for</code>-loop is an array, object, or range.
Unless it’s iterating over an object, you can choose to step through
in fixed-size increments.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        o <span class="hljs-string">'FOR Chain IN Expression'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> For kind: $<span class="hljs-number">1</span>, item: $<span class="hljs-number">2.</span>unwrap!, index: $<span class="hljs-number">3</span>, source: $<span class="hljs-number">4</span>
        o <span class="hljs-string">'FOR Chain IN Expression CASE Expression'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> For kind: $<span class="hljs-number">1</span>, item: $<span class="hljs-number">2.</span>unwrap!, index: $<span class="hljs-number">3</span>, source: $<span class="hljs-number">4</span>, guard: $<span class="hljs-number">6</span>
        o <span class="hljs-string">'FOR Chain IN Expression BY Expression'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> For kind: $<span class="hljs-number">1</span>, item: $<span class="hljs-number">2.</span>unwrap!, index: $<span class="hljs-number">3</span>, source: $<span class="hljs-number">4</span>, step: $<span class="hljs-number">6</span>
        o <span class="hljs-string">'FOR Chain IN Expression BY Expression CASE Expression'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> For kind: $<span class="hljs-number">1</span>, item: $<span class="hljs-number">2.</span>unwrap!, index: $<span class="hljs-number">3</span>, source: $<span class="hljs-number">4</span>, step: $<span class="hljs-number">6</span>, guard: $<span class="hljs-number">8</span>

        o <span class="hljs-string">'FOR Expression'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> For kind: $<span class="hljs-number">1</span>, source: $<span class="hljs-number">2</span>, ref: <span class="hljs-literal">true</span>
        o <span class="hljs-string">'FOR Expression CASE Expression'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> For kind: $<span class="hljs-number">1</span>, source: $<span class="hljs-number">2</span>, ref: <span class="hljs-literal">true</span>, guard: $<span class="hljs-number">4</span>
        o <span class="hljs-string">'FOR Expression BY Expression'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> For kind: $<span class="hljs-number">1</span>, source: $<span class="hljs-number">2</span>, ref: <span class="hljs-literal">true</span>, step: $<span class="hljs-number">4</span>
        o <span class="hljs-string">'FOR Expression BY Expression CASE Expression'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> For kind: $<span class="hljs-number">1</span>, source: $<span class="hljs-number">2</span>, ref: <span class="hljs-literal">true</span>, step: $<span class="hljs-number">4</span>, guard: $<span class="hljs-number">6</span>

        o <span class="hljs-string">'FOR     ID         OF Expression'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> For {+object, kind: $<span class="hljs-number">1</span>, index: $<span class="hljs-number">2</span>,                   source: $<span class="hljs-number">4</span>}
        o <span class="hljs-string">'FOR     ID         OF Expression CASE Expression'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> For {+object, kind: $<span class="hljs-number">1</span>, index: $<span class="hljs-number">2</span>,                   source: $<span class="hljs-number">4</span>, guard: $<span class="hljs-number">6</span>}
        o <span class="hljs-string">'FOR     ID , Chain OF Expression'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> For {+object, kind: $<span class="hljs-number">1</span>, index: $<span class="hljs-number">2</span>, item: $<span class="hljs-number">4.</span>unwrap!, source: $<span class="hljs-number">6</span>}
        o <span class="hljs-string">'FOR     ID , Chain OF Expression CASE Expression'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> For {+object, kind: $<span class="hljs-number">1</span>, index: $<span class="hljs-number">2</span>, item: $<span class="hljs-number">4.</span>unwrap!, source: $<span class="hljs-number">6</span>, guard: $<span class="hljs-number">8</span>}

        o <span class="hljs-string">'FOR ID FROM Expression TO Expression'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> For kind: $<span class="hljs-number">1</span>, index: $<span class="hljs-number">2</span>, from: $<span class="hljs-number">4</span>, op: $<span class="hljs-number">5</span>, to: $<span class="hljs-number">6</span>
        o <span class="hljs-string">'FOR FROM Expression TO Expression'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> For kind: $<span class="hljs-number">1</span>,            from: $<span class="hljs-number">3</span>, op: $<span class="hljs-number">4</span>, to: $<span class="hljs-number">5</span>, ref: <span class="hljs-literal">true</span>
        o <span class="hljs-string">'FOR ID FROM Expression TO Expression CASE Expression'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> For kind: $<span class="hljs-number">1</span>, index: $<span class="hljs-number">2</span>, from: $<span class="hljs-number">4</span>, op: $<span class="hljs-number">5</span>, to: $<span class="hljs-number">6</span>, guard: $<span class="hljs-number">8</span>
        o <span class="hljs-string">'FOR FROM Expression TO Expression CASE Expression'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> For kind: $<span class="hljs-number">1</span>,            from: $<span class="hljs-number">3</span>, op: $<span class="hljs-number">4</span>, to: $<span class="hljs-number">5</span>, guard: $<span class="hljs-number">7</span>, ref: <span class="hljs-literal">true</span>
        o <span class="hljs-string">'FOR ID FROM Expression TO Expression BY Expression'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> For kind: $<span class="hljs-number">1</span>, index: $<span class="hljs-number">2</span>, from: $<span class="hljs-number">4</span>, op: $<span class="hljs-number">5</span>, to: $<span class="hljs-number">6</span>, step: $<span class="hljs-number">8</span>
        o <span class="hljs-string">'FOR FROM Expression TO Expression BY Expression'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> For kind: $<span class="hljs-number">1</span>,            from: $<span class="hljs-number">3</span>, op: $<span class="hljs-number">4</span>, to: $<span class="hljs-number">5</span>, step: $<span class="hljs-number">7</span>, ref: <span class="hljs-literal">true</span>
        o <span class="hljs-string">'FOR ID FROM Expression TO Expression BY Expression CASE Expression'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> For kind: $<span class="hljs-number">1</span>, index: $<span class="hljs-number">2</span>, from: $<span class="hljs-number">4</span>, op: $<span class="hljs-number">5</span>, to: $<span class="hljs-number">6</span>, step: $<span class="hljs-number">8</span>, guard: $<span class="hljs-number">10</span>
        o <span class="hljs-string">'FOR FROM Expression TO Expression BY Expression CASE Expression'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> For kind: $<span class="hljs-number">1</span>,            from: $<span class="hljs-number">3</span>, op: $<span class="hljs-number">4</span>, to: $<span class="hljs-number">5</span>, step: $<span class="hljs-number">7</span>, guard: $<span class="hljs-number">9</span>, ref: <span class="hljs-literal">true</span>
        o <span class="hljs-string">'FOR ID FROM Expression TO Expression CASE Expression BY Expression'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> For kind: $<span class="hljs-number">1</span>, index: $<span class="hljs-number">2</span>, from: $<span class="hljs-number">4</span>, op: $<span class="hljs-number">5</span>, to: $<span class="hljs-number">6</span>, guard: $<span class="hljs-number">8</span>, step: $<span class="hljs-number">10</span>
        o <span class="hljs-string">'FOR FROM Expression TO Expression CASE Expression BY Expression'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> For kind: $<span class="hljs-number">1</span>,            from: $<span class="hljs-number">3</span>, op: $<span class="hljs-number">4</span>, to: $<span class="hljs-number">5</span>, guard: $<span class="hljs-number">7</span>, step: $<span class="hljs-number">9</span>, ref: <span class="hljs-literal">true</span>

        o <span class="hljs-string">'WHILE Expression'</span>                 -&gt; <span class="hljs-keyword">new</span> While $<span class="hljs-number">2</span>, $<span class="hljs-number">1</span> <span class="hljs-keyword">is</span> <span class="hljs-string">'until'</span>
        o <span class="hljs-string">'WHILE Expression CASE Expression'</span> -&gt; <span class="hljs-keyword">new</span> While $<span class="hljs-number">2</span>, $<span class="hljs-number">1</span> <span class="hljs-keyword">is</span> <span class="hljs-string">'until'</span> .add-guard $<span class="hljs-number">4</span>
        o <span class="hljs-string">'WHILE Expression , Expression'</span>    -&gt; <span class="hljs-keyword">new</span> While $<span class="hljs-number">2</span>, $<span class="hljs-number">1</span> <span class="hljs-keyword">is</span> <span class="hljs-string">'until'</span>, $<span class="hljs-number">4</span>
        o <span class="hljs-string">'WHILE Expression , Expression CASE Expression'</span>
        , <span class="hljs-function">-&gt;</span> <span class="hljs-keyword">new</span> While $<span class="hljs-number">2</span>, $<span class="hljs-number">1</span> <span class="hljs-keyword">is</span> <span class="hljs-string">'until'</span>, $<span class="hljs-number">4</span> .add-guard $<span class="hljs-number">6</span>

    LoopHeads:
        o <span class="hljs-string">'LoopHead'</span>           -&gt; [$<span class="hljs-number">1</span>]
        o <span class="hljs-string">'LoopHeads LoopHead'</span> -&gt; $<span class="hljs-number">1</span> ++ $<span class="hljs-number">2</span>
        o <span class="hljs-string">'LoopHeads NEWLINE LoopHead'</span> -&gt; $<span class="hljs-number">1</span> ++ $<span class="hljs-number">3</span>
        o <span class="hljs-string">'LoopHeads INDENT LoopHead'</span>  -&gt; $<span class="hljs-number">1</span> ++ $<span class="hljs-number">3</span>

    Cases:
        o       <span class="hljs-string">'CASE Exprs Block'</span> -&gt; [L <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-keyword">new</span> Case $<span class="hljs-number">2</span>, $<span class="hljs-number">3</span>]
        o <span class="hljs-string">'Cases CASE Exprs Block'</span> -&gt; $<span class="hljs-number">1</span> ++ L <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-keyword">new</span> Case $<span class="hljs-number">3</span>, $<span class="hljs-number">4</span>

    OptExtends:
        o <span class="hljs-string">'EXTENDS Expression'</span> -&gt; $<span class="hljs-number">2</span>
        o <span class="hljs-string">''</span>                   -&gt; <span class="hljs-literal">null</span>

    OptImplements:
        o <span class="hljs-string">'IMPLEMENTS Exprs'</span> -&gt; $<span class="hljs-number">2</span>
        o <span class="hljs-string">''</span>                 -&gt; <span class="hljs-literal">null</span></pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <h2 id="precedence-and-associativity">Precedence and Associativity</h2>
<p>Following these rules is what makes
<code>a + b * c</code> parse as <code>a + (b * c)</code> (rather than <code>(a + b) * c</code>),
and <code>x = y = z</code> <code>x = (y = z)</code> (not <code>(x = y) = z</code>).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>operators =</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>Listed from lower precedence.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    &lt;[ left     POST_IF      ]&gt;
    &lt;[ right    ASSIGN HURL  ]&gt;
    &lt;[ right    YIELD        ]&gt;
    &lt;[ right    BACKPIPE     ]&gt;
    &lt;[ left     PIPE         ]&gt;
    &lt;[ right    , FOR WHILE EXTENDS INDENT SWITCH CASE TO BY LABEL ]&gt;
    &lt;[ right    LOGIC        ]&gt;
    &lt;[ left     BITWISE      ]&gt;
    &lt;[ right    COMPARE      ]&gt;
    &lt;[ left     RELATION     ]&gt;
    &lt;[ right    CONCAT       ]&gt;
    &lt;[ left     SHIFT IMPORT CLONEPORT ]&gt;
    &lt;[ left     +-           ]&gt;
    &lt;[ left     MATH         ]&gt;
    &lt;[ right    UNARY        ]&gt;
    &lt;[ right    POWER        ]&gt;
    &lt;[ right    COMPOSE      ]&gt;
    &lt;[ nonassoc CREMENT      ]&gt;
    &lt;[ nonassoc ...          ]&gt;
    &lt;[ left     BACKTICK     ]&gt;</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <h2 id="wrapping-up">Wrapping Up</h2>

            </div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>Process all of our rules and prepend resolutions, while recording all
terminals (every symbol which does not appear as the name of a rule above)
as <code>tokens</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>tokens = <span class="hljs-keyword">do</span>
    <span class="hljs-keyword">for</span> name, alts <span class="hljs-keyword">of</span> bnf
        <span class="hljs-keyword">for</span> alt <span class="hljs-keyword">in</span> alts
            [token <span class="hljs-keyword">for</span> token <span class="hljs-keyword">in</span> alt<span class="hljs-number">.0</span> <span class="hljs-keyword">when</span> token <span class="hljs-keyword">not</span> <span class="hljs-keyword">of</span> bnf]
.join <span class="hljs-string">' '</span>

bnf.Root = [[[<span class="hljs-string">'Body'</span>] <span class="hljs-string">'return $$'</span>]]</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>Finally, initialize the parser with the name of the root.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-built_in">module</span>.exports =
    <span class="hljs-keyword">new</span> (<span class="hljs-built_in">require</span> <span class="hljs-string">'jison'</span>).Parser {bnf, operators, tokens, start-symbol: <span class="hljs-string">'Root'</span>}</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
